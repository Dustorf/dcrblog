<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">    
    <title>Lightning Network in Practice</title> 
    <meta name="description" content="Decred is an open and progressive cryptocurrency with a system of community-based governance integrated into its blockchain.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" type="text/css" href="/css/fonts-lato.css" />
    <link rel="stylesheet" href="/css/fonts-ssp.css">
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="canonical" href="https://blog.decred.org/2017/05/23/Lightning-Network-in-Practice/">
    <link rel="alternate" type="application/rss+xml" title="Decred Blog Feed" href="https://blog.decred.org/feed.xml">
</head>
<body>
    <nav id="top" class="site-navigation">
        <div class="inner">
            <button id="menu-toggle" aria-expanded="false">Menu</button>
            <div class="nav-menu">
                <ul class="menu">
                
                  
                  
                  <li class="">
                    <a class="" href="/">Home</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="https://github.com/decred/">Github</a>
                  </li>
                
                </ul>        
            </div><!-- .nav-menu -->
            <a class="subscribe-button fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">Subscribe</span></a>
        </div><!-- .inner -->
    </nav><!-- .site-navigation -->
    <header class="site-header">
        <div class="inner">
	    <h1 class="site-title"><a class="logo-text" href="/"><img class="logo-art" src="/images/banner.png" alt="Decred Blog"></a></h1>
        </div><!-- .inner -->
    </header>
    <div class="site-content">
    <div class="inner">
        <main class="site-main">
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <div class="post-thumbnail">
                            <img src="/images/posts/lightning_in_practice.jpg" alt="Lightning Network in Practice">
                        </div><!-- .post-thumbnail -->
                        
                        <h1 class="entry-title">Lightning Network in Practice</h1>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Jake Yocom-Piatt</span> on <time class="published" datetime="2017-05-23">May 23, 2017</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    <p><a href="https://lightning.network">Lightning Network</a> (“LN” for short) is a recently-proposed, and even more recently implemented, low-latency off-chain micropayment system that can work with Bitcoin or other similar cryptocurrencies, such as Decred.  Since LN makes liberal use of smart contracts, the details of how it works are, unsurprisingly, complex.  To make LN more tangible from a non-technical perspective, we will view it through the lens of practical engineering considerations and the concepts that drive those considerations.</p>

<p>The utility of LN is driven by several major considerations in the context of cryptocurrencies:</p>

<ul>
  <li>low-latency payments - Many potential use cases for a modern system of transmitting value require a low latency, e.g. point-of-sale purchases.  Waiting for an on-chain transaction places unreasonable constraints on both the time between blocks in a blockchain and what is considered an acceptable delay for payment to confirm.</li>
  <li>deferred settlement - In order to minimize the number of transactions that flow between banks, banks make use of a net settlement process wherein multiple transactions between a given pair of banks are consolidated into a single transaction at the end of each day.  Since cryptocurrencies effectively allow you to “be your own bank”, having a similar deferred settlement process substantially reduces transaction load on the blockchain and reduces transaction fees, allowing it to scale much better as the transaction rate increases.</li>
  <li>privacy enhancement - A blockchain for any publicly available cryptocurrency is necessarily a public ledger, even when the details of ledger entries are obfuscated by cryptography.  By taking transactions off-chain, those transactions have their privacy enhanced simply by merit of not being in the public ledger.</li>
  <li>cross chain atomic swaps - Reliance on centralized exchanges is a major weak point of cryptocurrencies, whether we are talking about exchanges that handle fiat currencies or that handle cryptocurrencies exclusively.  Cross chain atomic swaps will create liquidity between Decred and other cryptocurrencies without the counterparty risk that exists between users and centralized exchanges.</li>
</ul>

<p>The benefits of LN are clearly quite substantial, per the considerations above.  However, there are some notable weaknesses with LN that users need to be aware of:</p>

<ul>
  <li>counterparty theft - Since LN transactions occur off-chain, it is possible for a counterparty in a payment channel to attempt to steal the funds in the channel, but this can only succeed under certain conditions and is preventable.  Conventional on-chain transactions do not suffer from this problem because they are written directly to a blockchain, an immutable ledger.</li>
  <li>centralization of nodes - LN transactions are handled by a network of nodes that is separate from the underlying blockchain, and there is potential for these nodes to become centralized, despite them not having custody over coins.  Operating a busy LN node is a potentially expensive operation, creating a barrier to entry for operating such a node and correspondingly increasing centralization.</li>
</ul>

<p>Despite these weaknesses, I believe that the benefits of LN far outweigh the potential downsides.  Each of these considerations is addressed in greater detail below.</p>

<!--more-->

<h3>Low-latency payments</h3>

<p>Cryptocurrencies require the regular creation of blocks in a blockchain, which places a lower bound on the average amount of time spent waiting for a transaction to be confirmed as valid.  The average time between blocks can range from 10 seconds to 10 minutes, depending on the cryptocurrency.  In the case of Decred, the average block time is 5 minutes.  With Decred, on-chain transactions take too long to confirm for most point-of-sale applications, e.g. restaurants, bars, retail businesses, and this is assuming there is not a backlog of on-chain transactions.  The only option to fix this while keeping all transactions on-chain is to substantially shorten the average block time, but this still does not address the scenario of on-chain transaction congestion.</p>

<p>By supporting LN, we enable near-instant micropayments for Decred, which means that Decred can be accepted by merchants with a physical retail presence.  Beyond reproducing an experience similar to that of existing fiat banking payment methods, off-chain payments are not subject to the same congestion issues as exist with on-chain payments.  In the absence of LN support, Decred is not a practical means of paying for items in-person, unless the user experience of “we have to sit here for several minutes now” seems acceptable to the customer and merchant.  More generally, LN’s low latency allows for integration of Decred with a wider variety of business models.</p>

<h3>Deferred settlement</h3>

<p>Banks make regular use of a net settlement process to minimize the number of transactions between a bank and its counterparties.  The typical process involves taking a sum of the outbound payments from bank A to bank B that occur during a given business day, which consolidates what is potentially thousands of outbound payments into a single payment from bank A to bank B.  By deferring settlement between banks, there is a substantial reduction in the number of transactions that are sent between banks.  A payment channel in LN is a deferred settlement path that has a bounded value, which is very similar to the net settlement process that occurs between banks, albeit with a cap on the amount that can flow either direction.  This means that thousands of LN transactions could occur and correspond to only a couple on-chain transactions.</p>

<p>In the same way that banks perform net settlement to simplify interbank tranfers and save on fees, LN reduces the number of on-chain transactions and, correspondingly, reduces the fees.  Storing data on-chain should be avoided unless necessary, and not storing that data allows users to avoid the associated transaction fees.  All blockchains are backed by some type of database of transactions, and as the record count in that database goes up, the performance of the database starts to degrade.  LN will reduce the number of on-chain transactions, which helps minimize the rate at which the database record count grows.</p>

<h3>Privacy enhancement</h3>

<p>A requirement of having a functioning blockchain is that the users must be able to download its blocks, meaning that the transactions in those blocks are available to any user.  Even with cryptocurrencies that offer privacy protections, the individual transactions are required to be stored in a block that is publicly available.  With LN, transactions can occur fully off-chain, so that there is no public data corresponding to that transaction.  The only record of LN transactions is with the intermediate LN nodes that relay that transaction between the sender and its recipient, which is a substantial privacy improvement over it being publicly available.</p>

<h3>Cross chain atomic swaps</h3>

<p>Anyone who holds cryptocurrency is aware of how much that acquisition process depends on centralized exchanges.  Exchanges that only handle cryptocurrencies are less prone to problems, but they are still major points of centralization.  In the event an exchange must halt some or all of its business, it can have a very serious effect on the value of the cryptocurrencies it trades.  Decentralized exchanges do exist, but they rely on escrow processes and arbitrators.</p>

<p>The addition of LN support allows for both on-chain and off-chain atomic swaps, meaning that trustless cross chain exchanges can occur.  A caveat here is that both Decred and the counterparty chain must support LN for the swaps to occur.  On-chain atomic swaps work well if a low settlement latency is not required, and off-chain atomic swaps can be used if a much lower latency is required.  These swaps are exclusively between cryptocurrencies, so this technique will not work when fiat is involved.  Creating liquidity via cross chain atomic swaps will reduce the counterparty risk associated with exchanging Decred.</p>

<h3>Counterparty theft</h3>

<p>Setting up a LN payment channel requires one or both counterparties to make an on-chain transaction and exchange some additional information to initialize the channel.  Since LN transactions occur off-chain, they are not immutable, but they are carefully constructed from smart contracts in a way such that attempted theft of funds from the channel allows the honest counterparty to take the channel funds as a penalty.  While theft of the funds in the channel is possible, LN transactions have built-in protection against this scenario, and stealing the funds requires the ability to prevent a “breach remedy” transaction from the counterparty being mined on-chain.  This theft scenario can only occur when there is substantial congestion for on-chain transactions or miners collectively collude to not mine the breach remedy transaction, both of which constitute a high barrier when you consider most payment channels will only contain a small amount of coins.</p>

<h3>Centralization of nodes</h3>

<p>LN transactions are transmitted over a network that is separate from the network used by the underlying cryptocurrency, which means that LN nodes are separate from the underlying cryptocurrency nodes.  The requirements for running a LN node are very minimal if you’re an end user, e.g. a consumer or a merchant, you can just start the node, fully fund a channel with another LN node that has good connectivity, and you’re set.  If you are planning to operate a busy intermediate LN node that has many channels open to other nodes, you will have to lock some coins to open up channels with your various counterparties.  The requirement that you have “skin in the game” when acting as an intermediate LN node is good in that it incentivizes competent node administration, but it may also lead to a substantial barrier to entry in the future as the relative cost of operating an intermediate LN node becomes high.  If this barrier to entry is too high, it will encourage centralization over time, despite operating a LN node being permissionless.</p>

<h3>Conclusion</h3>

<p>Since supporting LN does not break any existing functionality and only adds to Decred’s capabilities as a system of value storage and transmission, it is a very attractive target for addition to Decred.  LN is the most immediately useful application of smart contracts I have seen to date because it facilitates low-latency off-chain transactions, which allows for direct competition with existing fiat payment methods.  While LN does have some shortcomings, its weaknesses were carefully considered as part of crafting the smart contracts that enable it, and the weakenesses are minor in comparison to the utility added by LN.  If you would like to comment on this article, please <a href="https://forum.decred.org/threads/lightning-network-in-practice.5377/">join us on the forum thread</a>.</p>

                </div><!-- .entry-content -->
                <footer class="entry-footer">
                    <div class="share-post">
                        <span>Share</span>
                        <a class="fa-twitter" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=Lightning%20Network%20in%20Practice&amp;url=https://blog.decred.org/2017/05/23/Lightning-Network-in-Practice/"><span class="screen-reader-text">Twitter</span></a>
                        <a class="fa-facebook" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.decred.org/2017/05/23/Lightning-Network-in-Practice/&amp;t=Lightning%20Network%20in%20Practice"><span class="screen-reader-text">Facebook</span></a>
                        <a class="fa-google-plus" target="_blank" rel="noopener noreferrer" href="http://plus.google.com/share?url=https://blog.decred.org/2017/05/23/Lightning-Network-in-Practice/"><span class="screen-reader-text">Google+</span></a>
                    </div><!-- .share-post -->
                    
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#Decred" title="Pages tagged Decred" rel="tag">Decred</a><a href="/tags/index.html#Lightning+Network" title="Pages tagged Lightning Network" rel="tag">Lightning Network</a><a href="/tags/index.html#lnd" title="Pages tagged lnd" rel="tag">lnd</a><a href="/tags/index.html#smart+contracts" title="Pages tagged smart contracts" rel="tag">smart contracts</a>
                    </div>
                    
                </footer><!-- .entry-footer -->
            </article><!-- .post -->
            <div class="author-box">
                <div class="author-info">
                    <div class="author-avatar" style="background-image: url(/images/jy-p_300x300.png)"><span class="screen-reader-text">Jake Yocom-Piatt's Picture</span></div>
                    <div class="author-details">
                        <h2 class="author-title">About Jake Yocom-Piatt</h2>
                        <p class="author-bio">Decred project organizer!</p>
                        <span class="author-location"><i class="fa-map-marker" aria-hidden="true"></i> Chicago, US</span>
                        <span class="author-website"><i class="fa-chain" aria-hidden="true"></i> <a href="https://twitter.com/decredproject" target="_blank" rel="noopener noreferrer"> https://twitter.com/decredproject</a></span>
                    </div><!-- .author-details -->
                </div><!-- .author-info -->
            </div><!-- .author-box -->
            <nav class="post-navigation">
                <h2 class="screen-reader-text">Post navigation</h2>
                
                <div class="nav-previous">
                    <div class="nav-inside">
                        
                        <a href="/2017/04/03/A-New-Ticket-Price-Algorithm/" class="nav-thumb" style="background-image: url(/images/posts/black_friday_push.jpg)"></a>
                        
                        <div class="nav-before">Previous</div>
                        <div class="nav-title"><a href="/2017/04/03/A-New-Ticket-Price-Algorithm/">A New Ticket Price Algorithm</a></div>
                        <div class="nav-date">April 3, 2017</div>
                    </div><!-- .nav-inside -->
                </div><!-- .nav-previous -->
                
                
                <div class="nav-next">
                    <div class="nav-inside">
                        
                        <a href="/2017/06/14/Dcrtime/" class="nav-thumb" style="background-image: url(/images/posts/in_time_counter.gif)"></a>
                        
                        <div class="nav-before">Next</div>
                        <div class="nav-title"><a href="/2017/06/14/Dcrtime/">dcrtime: Blockchain-based Timestamps</a></div>
                        <div class="nav-date">June 14, 2017</div>
                    </div><!-- .nav-inside -->
                </div><!-- .nav-next -->
                
            </nav><!-- .post-navigation -->
            
        </main><!-- .site-main -->
        <aside class="sidebar">

    
    <section class="widget widget-text">
        <h2 class="widget-title">About Jake Yocom-Piatt</h2>
        <p>Decred project organizer!</p>
    </section><!-- .widget-text -->
    

    

    <section class="widget widget-recent-posts">
        <h2 class="widget-title">Latest Posts</h2>
        <ul class="recent-posts">
            
            <li class="recent-item"><a href="/2019/08/28/Iterating-Privacy/">Iterating Privacy</a> <span>August 28, 2019</span></li>
            
            <li class="recent-item"><a href="/2019/08/21/Surveying-the-Privacy-Landscape/">Surveying the Privacy Landscape</a> <span>August 21, 2019</span></li>
            
            <li class="recent-item"><a href="/2018/10/15/Politeia-in-Production/">Politeia in Production</a> <span>October 15, 2018</span></li>
            
            <li class="recent-item"><a href="/2018/06/05/A-New-Kind-of-DEX/">A New Kind of DEX</a> <span>June 5, 2018</span></li>
            
            <li class="recent-item"><a href="/2018/02/28/2018-Decred-Roadmap/">2018 Decred Roadmap</a> <span>February 28, 2018</span></li>
            
        </ul><!-- .recent-posts -->
    </section><!-- .widget-recent-posts -->

    <!--Create a sorted array of tags-->
    
    
    <section class="widget widget-tags">
        <h2 class="widget-title">Tags</h2>
        <div class="tagcloud">
            
            <a href="/tags/#Bitcoin">Bitcoin</a>
            
            <a href="/tags/#CoinShuffle%2B%2B">CoinShuffle++</a>
            
            <a href="/tags/#Confidential+Transactions">Confidential Transactions</a>
            
            <a href="/tags/#DAE">DAE</a>
            
            <a href="/tags/#DAO">DAO</a>
            
            <a href="/tags/#DEX">DEX</a>
            
            <a href="/tags/#Decred">Decred</a>
            
            <a href="/tags/#DiceMix">DiceMix</a>
            
            <a href="/tags/#LN">LN</a>
            
            <a href="/tags/#Lightning+Network">Lightning Network</a>
            
            <a href="/tags/#Litecoin">Litecoin</a>
            
            <a href="/tags/#OTC">OTC</a>
            
            <a href="/tags/#Politeia">Politeia</a>
            
            <a href="/tags/#Proof-of-Stake">Proof-of-Stake</a>
            
            <a href="/tags/#Proposal+System">Proposal System</a>
            
            <a href="/tags/#RFP">RFP</a>
            
            <a href="/tags/#SPV">SPV</a>
            
            <a href="/tags/#Stake+Difficulty">Stake Difficulty</a>
            
            <a href="/tags/#Ticket+Price">Ticket Price</a>
            
            <a href="/tags/#Treasury">Treasury</a>
            
            <a href="/tags/#atomic+swap">atomic swap</a>
            
            <a href="/tags/#best-practices">best-practices</a>
            
            <a href="/tags/#blockchain+anchor">blockchain anchor</a>
            
            <a href="/tags/#challenge">challenge</a>
            
            <a href="/tags/#consensus">consensus</a>
            
            <a href="/tags/#contractors">contractors</a>
            
            <a href="/tags/#cryptocurrency">cryptocurrency</a>
            
            <a href="/tags/#database">database</a>
            
            <a href="/tags/#dcrd">dcrd</a>
            
            <a href="/tags/#dcrtime">dcrtime</a>
            
            <a href="/tags/#dcrwallet">dcrwallet</a>
            
            <a href="/tags/#decentralized+exchange">decentralized exchange</a>
            
            <a href="/tags/#decentralized+regulation">decentralized regulation</a>
            
            <a href="/tags/#developers">developers</a>
            
            <a href="/tags/#exchange">exchange</a>
            
            <a href="/tags/#gominer">gominer</a>
            
            <a href="/tags/#governance">governance</a>
            
            <a href="/tags/#hard+fork">hard fork</a>
            
            <a href="/tags/#hard+fork+voting">hard fork voting</a>
            
            <a href="/tags/#instant+messaging">instant messaging</a>
            
            <a href="/tags/#integration">integration</a>
            
            <a href="/tags/#lnd">lnd</a>
            
            <a href="/tags/#meltdown">meltdown</a>
            
            <a href="/tags/#payment">payment</a>
            
            <a href="/tags/#paymetheus">paymetheus</a>
            
            <a href="/tags/#post-quantum">post-quantum</a>
            
            <a href="/tags/#privacy">privacy</a>
            
            <a href="/tags/#proposal+system">proposal system</a>
            
            <a href="/tags/#researchers">researchers</a>
            
            <a href="/tags/#roadmap">roadmap</a>
            
            <a href="/tags/#secure+communications">secure communications</a>
            
            <a href="/tags/#security">security</a>
            
            <a href="/tags/#smart+contracts">smart contracts</a>
            
            <a href="/tags/#soft+fork">soft fork</a>
            
            <a href="/tags/#spectre">spectre</a>
            
            <a href="/tags/#support">support</a>
            
            <a href="/tags/#timestamped+filesystem">timestamped filesystem</a>
            
            <a href="/tags/#verifiable+volume">verifiable volume</a>
            
            <a href="/tags/#zkc">zkc</a>
            
        </div><!-- .tagcloud -->
    </section><!-- .widget -->

</aside><!-- .sidebar -->

    </div><!-- .inner -->
</div><!-- .site-content -->

    <footer class="site-footer">
    <div class="inner">
        <div class="social-links">
            
            <a href="https://twitter.com/decredproject" class="fa-twitter square fill-horizontal"><span class="screen-reader-text">Twitter</span></a>
            
            
            
            
            <a href="https://github.com/decred" class="fa-github-alt square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
            
            
            
            
            
            
            
            <a class="fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">RSS</span></a>
        </div><!-- .social-links -->
        <div class="site-info">
            &copy; <a href="/">Decred Blog</a> all rights reserved. <br />
            <a href="#top" id="top-link" class="fa-chevron-up top-link square fill-horizontal"><span class="screen-reader-text">Back to the top</span></a>
        </div><!-- .site-info -->
    </div><!-- .inner -->
</footer><!-- .site-footer -->

    <script src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/plugins.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
</body>
</html>
