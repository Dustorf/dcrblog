<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">    
    <title>On-Chain Atomic Swaps</title> 
    <meta name="description" content="Decred is an open and progressive cryptocurrency with a system of community-based governance integrated into its blockchain.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" type="text/css" href="/css/fonts-lato.css" />
    <link rel="stylesheet" href="/css/fonts-ssp.css">
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="canonical" href="https://blog.decred.org/2017/09/20/On-Chain-Atomic-Swaps/">
    <link rel="alternate" type="application/rss+xml" title="Decred Blog Feed" href="https://blog.decred.org/feed.xml">
</head>
<body>
    <nav id="top" class="site-navigation">
        <div class="inner">
            <button id="menu-toggle" aria-expanded="false">Menu</button>
            <div class="nav-menu">
                <ul class="menu">
                
                  
                  
                  <li class="">
                    <a class="" href="/">Home</a>
                  </li>
                
                  
                  
                  <li class="">
                    <a class="" href="https://github.com/decred/">Github</a>
                  </li>
                
                </ul>        
            </div><!-- .nav-menu -->
            <a class="subscribe-button fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">Subscribe</span></a>
        </div><!-- .inner -->
    </nav><!-- .site-navigation -->
    <header class="site-header">
        <div class="inner">
	    <h1 class="site-title"><a class="logo-text" href="/"><img class="logo-art" src="/images/banner.png" alt="Decred Blog"></a></h1>
        </div><!-- .inner -->
    </header>
    <div class="site-content">
    <div class="inner">
        <main class="site-main">
            <article class="post">
                <header class="entry-header"> 
                    <div class="entry-header-wrap">
                        
                        <div class="post-thumbnail">
                            <img src="/images/posts/atomic_swap.png" alt="On-Chain Atomic Swaps">
                        </div><!-- .post-thumbnail -->
                        
                        <h1 class="entry-title">On-Chain Atomic Swaps</h1>
                    </div><!-- .entry-header-wrap -->
                    <div class="entry-meta">
                        by <span class="post-author">Jake Yocom-Piatt</span> on <time class="published" datetime="2017-09-20">September 20, 2017</time>
                    </div><!-- .entry-meta -->
                </header><!-- .entry-header -->
                <div class="entry-content">
                    <p>As many of you know, yesterday marked the <a href="https://twitter.com/decredproject/status/910224860625780736">first cross-chain atomic swap between Decred and Litecoin</a>. This is an important step in a direction that allows users to conduct trustless, cross-chain, over-the-counter (“OTC”) trades without a third party. This disintermediates the exchange process between cryptocurrencies that support these swap transactions. We have created some simple prototype tools under the <a href="https://github.com/decred/atomicswap/">atomicswap repository</a>, dcratomicswap, btcatomicswap and ltcatomicswap, to allow Decred, Bitcoin and Litecoin users to swap between DCR, BTC and LTC using on-chain atomic swaps. These tools were built for those who we have the means at hand to disintermediate the exchange process: transaction script and OP_CLTV support. It is worth noting that these tools do not address the issue of order book management that is typically performed with full-featured exchanges. There are some privacy and transparency consequences related to on-chain atomic swaps that are not present with centralized exchanges. As of this announcement, the tools are text-based, but we will be integrating this into the Decrediton GUI wallet in a future release. The process for on-chain atomic swaps is described in more detail below.</p>

<!--more-->

<h3>Prerequisites</h3>

<p>In order to perform an on-chain atomic swap between 2 cryptocurrencies, there are several prerequisites.  Both chains must support:</p>

<ul>
  <li>branched transaction scripts</li>
  <li>the same hash algorithm in both chains’ transaction scripts</li>
  <li>signature checks in transaction scripts</li>
  <li>CheckLockTimeVerify or CheckSequenceVerify (“CLTV” and “CSV” for short) in transaction scripts</li>
</ul>

<p>Since Decred and Litecoin are forks of Bitcoin, the first 3 conditions are trivially satisfied.  Further, both Decred and Litecoin have been tracking updates from Bitcoin, so they both support CLTV.  The CLTV/CSV support is used to effect a refund, in the cases where either party does not complete part of the process.  With some further work on part of other Bitcoin-based cryptocurrency projects, this on-chain atomic swap can occur between any pair of cryptocurrencies that satisfy the above constraints.</p>

<h3>Use Cases</h3>

<p>On-chain atomic swaps are not useful in all cases where users want to perform an exchange.  This process is well-suited to larger trades that do not require a particularly low latency or high frequency.  Since the process involves on-chain transactions, the speed of the process is bound by the mining of blocks, which can take roughly an hour in a worst-case scenario with Bitcoin.  Additionally, users must pay transaction fees for both the swap transaction and the redeem transaction on each chain, which can have a non-trivial cost with Bitcoin.</p>

<h3>Privacy</h3>

<p>Since these swaps are on-chain, there are some privacy implications that users should be aware of.  The swap transactions on each chain include the same hashed value, meaning that anyone doing passive surveillance of the corresponding blockchains can link the coins on one side of the swap to the coins on the other side.  This is a different threat model than typical centralized exchanges, where the exchange is required by nation state regulations to retain records of user identities and activity.  Instead of having to request data from an exchange, interested parties can follow the coins from one chain to the other.  However, despite the ease of determining provenance of the coins across chains, there is no associated identity data available on the counterparties.</p>

<h3>Transparency</h3>

<p>In contrast to the way trading works at exchanges, attempts to churn volume via on-chain atomic swaps will be detectable by passive observers.  This means that users cannot show up with a small amount of coins and then create a ton of fake volume covertly.  In this sense, atomic swaps are a true return to the “moneychanger mat” scenario of the past, before the “casinoization” of exchanges.</p>

<h3>Integration</h3>

<p>Currently, this process uses a standalone binary on each side of the swap, e.g. a DCR binary and a BTC binary on each side.  The swap process has 3 steps on each side, requires some manual relaying of information via an existing communications channel, e.g. email or instant messaging, and uses a text interface, which is obviously less than ideal.  Over the next several weeks, we will integrate this process into the Decrediton GUI wallet to simplify it and automate some of the process.  It is our hope that a similar integration can occur with Bitcoin-QT and Litecoin-QT as well, for ease of use.  Detailed instructions on executing an atomic swap can be found <a href="https://github.com/decred/atomicswap/">here</a>.</p>

<p>The atomic swap process has been tested against dcrwallet (CLI), Decrediton (GUI), Bitcoin Core, and Litecoin Core.</p>

<h3>Conclusion</h3>

<p>We hope that Decred, Bitcoin and Litecoin users get some utility out of these tools and ultimately integrate them into their respective GUI wallets.  On-chain (and ultimately off-chain) atomic swaps are an exciting technology that earmarks a leap in cryptocurrency: the direct empowerment of users. Decred will be active in this space and continue to innovate toward this goal. We are interested in integrating support for additional cryptocurrencies, so atomic swaps can occur between many different chains.  Please contact us for advice on supporting swaps for your cryptocurrency on <a href="https://github.com/decred/atomicswap/">GitHub</a>, <a href="https://decred.slack.com/">Slack</a>, <a href="https://reddit.com/r/decred/">Reddit</a> or <a href="https://forum.decred.org/">our Forum</a>.</p>

                </div><!-- .entry-content -->
                <footer class="entry-footer">
                    <div class="share-post">
                        <span>Share</span>
                        <a class="fa-twitter" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=On-Chain%20Atomic%20Swaps&amp;url=https://blog.decred.org/2017/09/20/On-Chain-Atomic-Swaps/"><span class="screen-reader-text">Twitter</span></a>
                        <a class="fa-facebook" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.decred.org/2017/09/20/On-Chain-Atomic-Swaps/&amp;t=On-Chain%20Atomic%20Swaps"><span class="screen-reader-text">Facebook</span></a>
                        <a class="fa-google-plus" target="_blank" rel="noopener noreferrer" href="http://plus.google.com/share?url=https://blog.decred.org/2017/09/20/On-Chain-Atomic-Swaps/"><span class="screen-reader-text">Google+</span></a>
                    </div><!-- .share-post -->
                    
                    <div class="tag-links">
                        Tags: <a href="/tags/index.html#Decred" title="Pages tagged Decred" rel="tag">Decred</a><a href="/tags/index.html#atomic+swap" title="Pages tagged atomic swap" rel="tag">atomic swap</a><a href="/tags/index.html#Litecoin" title="Pages tagged Litecoin" rel="tag">Litecoin</a><a href="/tags/index.html#Bitcoin" title="Pages tagged Bitcoin" rel="tag">Bitcoin</a><a href="/tags/index.html#OTC" title="Pages tagged OTC" rel="tag">OTC</a><a href="/tags/index.html#exchange" title="Pages tagged exchange" rel="tag">exchange</a>
                    </div>
                    
                </footer><!-- .entry-footer -->
            </article><!-- .post -->
            <div class="author-box">
                <div class="author-info">
                    <div class="author-avatar" style="background-image: url(/images/jy-p_300x300.png)"><span class="screen-reader-text">Jake Yocom-Piatt's Picture</span></div>
                    <div class="author-details">
                        <h2 class="author-title">About Jake Yocom-Piatt</h2>
                        <p class="author-bio">Decred project organizer!</p>
                        <span class="author-location"><i class="fa-map-marker" aria-hidden="true"></i> Chicago, US</span>
                        <span class="author-website"><i class="fa-chain" aria-hidden="true"></i> <a href="https://twitter.com/decredproject" target="_blank" rel="noopener noreferrer"> https://twitter.com/decredproject</a></span>
                    </div><!-- .author-details -->
                </div><!-- .author-info -->
            </div><!-- .author-box -->
            <nav class="post-navigation">
                <h2 class="screen-reader-text">Post navigation</h2>
                
                <div class="nav-previous">
                    <div class="nav-inside">
                        
                        <a href="/2017/08/02/2017-Roadmap-Update-1/" class="nav-thumb" style="background-image: url(/images/posts/2017_roadmap_update_1.png)"></a>
                        
                        <div class="nav-before">Previous</div>
                        <div class="nav-title"><a href="/2017/08/02/2017-Roadmap-Update-1/">2017 Roadmap Update 1</a></div>
                        <div class="nav-date">August 2, 2017</div>
                    </div><!-- .nav-inside -->
                </div><!-- .nav-previous -->
                
                
                <div class="nav-next">
                    <div class="nav-inside">
                        
                        <a href="/2017/10/25/Politeia/" class="nav-thumb" style="background-image: url(/images/posts/politeia.jpg)"></a>
                        
                        <div class="nav-before">Next</div>
                        <div class="nav-title"><a href="/2017/10/25/Politeia/">Politeia: Proposals in a Timestamped Filesystem</a></div>
                        <div class="nav-date">October 25, 2017</div>
                    </div><!-- .nav-inside -->
                </div><!-- .nav-next -->
                
            </nav><!-- .post-navigation -->
            
        </main><!-- .site-main -->
        <aside class="sidebar">

    
    <section class="widget widget-text">
        <h2 class="widget-title">About Jake Yocom-Piatt</h2>
        <p>Decred project organizer!</p>
    </section><!-- .widget-text -->
    

    

    <section class="widget widget-recent-posts">
        <h2 class="widget-title">Latest Posts</h2>
        <ul class="recent-posts">
            
            <li class="recent-item"><a href="/2019/08/28/Iterating-Privacy/">Iterating Privacy</a> <span>August 28, 2019</span></li>
            
            <li class="recent-item"><a href="/2019/08/21/Surveying-the-Privacy-Landscape/">Surveying the Privacy Landscape</a> <span>August 21, 2019</span></li>
            
            <li class="recent-item"><a href="/2018/10/15/Politeia-in-Production/">Politeia in Production</a> <span>October 15, 2018</span></li>
            
            <li class="recent-item"><a href="/2018/06/05/A-New-Kind-of-DEX/">A New Kind of DEX</a> <span>June 5, 2018</span></li>
            
            <li class="recent-item"><a href="/2018/02/28/2018-Decred-Roadmap/">2018 Decred Roadmap</a> <span>February 28, 2018</span></li>
            
        </ul><!-- .recent-posts -->
    </section><!-- .widget-recent-posts -->

    <!--Create a sorted array of tags-->
    
    
    <section class="widget widget-tags">
        <h2 class="widget-title">Tags</h2>
        <div class="tagcloud">
            
            <a href="/tags/#Bitcoin">Bitcoin</a>
            
            <a href="/tags/#CoinShuffle%2B%2B">CoinShuffle++</a>
            
            <a href="/tags/#Confidential+Transactions">Confidential Transactions</a>
            
            <a href="/tags/#DAE">DAE</a>
            
            <a href="/tags/#DAO">DAO</a>
            
            <a href="/tags/#DEX">DEX</a>
            
            <a href="/tags/#Decred">Decred</a>
            
            <a href="/tags/#DiceMix">DiceMix</a>
            
            <a href="/tags/#LN">LN</a>
            
            <a href="/tags/#Lightning+Network">Lightning Network</a>
            
            <a href="/tags/#Litecoin">Litecoin</a>
            
            <a href="/tags/#OTC">OTC</a>
            
            <a href="/tags/#Politeia">Politeia</a>
            
            <a href="/tags/#Proof-of-Stake">Proof-of-Stake</a>
            
            <a href="/tags/#Proposal+System">Proposal System</a>
            
            <a href="/tags/#RFP">RFP</a>
            
            <a href="/tags/#SPV">SPV</a>
            
            <a href="/tags/#Stake+Difficulty">Stake Difficulty</a>
            
            <a href="/tags/#Ticket+Price">Ticket Price</a>
            
            <a href="/tags/#Treasury">Treasury</a>
            
            <a href="/tags/#atomic+swap">atomic swap</a>
            
            <a href="/tags/#best-practices">best-practices</a>
            
            <a href="/tags/#blockchain+anchor">blockchain anchor</a>
            
            <a href="/tags/#challenge">challenge</a>
            
            <a href="/tags/#consensus">consensus</a>
            
            <a href="/tags/#contractors">contractors</a>
            
            <a href="/tags/#cryptocurrency">cryptocurrency</a>
            
            <a href="/tags/#database">database</a>
            
            <a href="/tags/#dcrd">dcrd</a>
            
            <a href="/tags/#dcrtime">dcrtime</a>
            
            <a href="/tags/#dcrwallet">dcrwallet</a>
            
            <a href="/tags/#decentralized+exchange">decentralized exchange</a>
            
            <a href="/tags/#decentralized+regulation">decentralized regulation</a>
            
            <a href="/tags/#developers">developers</a>
            
            <a href="/tags/#exchange">exchange</a>
            
            <a href="/tags/#gominer">gominer</a>
            
            <a href="/tags/#governance">governance</a>
            
            <a href="/tags/#hard+fork">hard fork</a>
            
            <a href="/tags/#hard+fork+voting">hard fork voting</a>
            
            <a href="/tags/#instant+messaging">instant messaging</a>
            
            <a href="/tags/#integration">integration</a>
            
            <a href="/tags/#lnd">lnd</a>
            
            <a href="/tags/#meltdown">meltdown</a>
            
            <a href="/tags/#payment">payment</a>
            
            <a href="/tags/#paymetheus">paymetheus</a>
            
            <a href="/tags/#post-quantum">post-quantum</a>
            
            <a href="/tags/#privacy">privacy</a>
            
            <a href="/tags/#proposal+system">proposal system</a>
            
            <a href="/tags/#researchers">researchers</a>
            
            <a href="/tags/#roadmap">roadmap</a>
            
            <a href="/tags/#secure+communications">secure communications</a>
            
            <a href="/tags/#security">security</a>
            
            <a href="/tags/#smart+contracts">smart contracts</a>
            
            <a href="/tags/#soft+fork">soft fork</a>
            
            <a href="/tags/#spectre">spectre</a>
            
            <a href="/tags/#support">support</a>
            
            <a href="/tags/#timestamped+filesystem">timestamped filesystem</a>
            
            <a href="/tags/#verifiable+volume">verifiable volume</a>
            
            <a href="/tags/#zkc">zkc</a>
            
        </div><!-- .tagcloud -->
    </section><!-- .widget -->

</aside><!-- .sidebar -->

    </div><!-- .inner -->
</div><!-- .site-content -->

    <footer class="site-footer">
    <div class="inner">
        <div class="social-links">
            
            <a href="https://twitter.com/decredproject" class="fa-twitter square fill-horizontal"><span class="screen-reader-text">Twitter</span></a>
            
            
            
            
            <a href="https://github.com/decred" class="fa-github-alt square fill-horizontal"><span class="screen-reader-text">GitHub</span></a>
            
            
            
            
            
            
            
            <a class="fa-feed square fill-horizontal" href="/feed.xml"><span class="screen-reader-text">RSS</span></a>
        </div><!-- .social-links -->
        <div class="site-info">
            &copy; <a href="/">Decred Blog</a> all rights reserved. <br />
            <a href="#top" id="top-link" class="fa-chevron-up top-link square fill-horizontal"><span class="screen-reader-text">Back to the top</span></a>
        </div><!-- .site-info -->
    </div><!-- .inner -->
</footer><!-- .site-footer -->

    <script src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/plugins.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
</body>
</html>
